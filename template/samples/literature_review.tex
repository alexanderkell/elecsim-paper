Live experimentation of physical processes is often not practical. The costs of real life experimentation can be prohibitively high, and it normally requires significant time in order to fully ascertain the long-term trends. There is also a risk that changes can have detrimental impacts, and therefore often leads to only minor tweaks being made ~\cite{Forshaw2016}. These factors are particularly true for an electricity market, where decisions made can have long term impacts on energy mix, carbon emissions and investment decisions, with energy plants often having a lifetime of 25 years.  A solution to this is simulation, which can be used for rapid testing and prototyping of ideas. Simulation is the substitution of a physical process with a computer model. The computer model is parametrised by real world data and phenomena. The user is then able to experiment using this model, and assess the likelihoods of outcomes under certain scenarios and input variables \cite{Law:603360}.



Energy models can typically be classified as top-down macro-economic models or bottom-up techno-economic models~\cite{Bohringer1998}. Top-down models typically focus on behavioural realism with a focus on macro-economic metrics. They are useful for studying economy-wide responses to policies ~\cite{Hall2016}, for example MARKAL-MACRO \cite{Fishbone1981} and LEAP \cite{Heaps2016}. Bottom-up models represent the energy sector in detail, and are written as mathematical programming problems~\cite{Gargiulo2013}. They detail technology explicitly, and can include cost and emissions implications~\cite{Hall2016}.

It is possible to further categorise bottom-up models into optimisation and simulation models. Optimisation energy models minimise costs or maximise welfare from the perspective of a central planner, for instance a government~\cite{Keles2017}. A use-case would be a government that wants cheap, reliable and a low-carbon electricity supply by a specified date. An optimisation model would find the optimal mix of generators to meet this whilst taking into account constraints such as space, resources and demand. Examples of optimisation models are MARKAL/TIMES~\cite{Fishbone1981} and MESSAGE~\cite{Schrattenholzer1981}. MARKAL is possibly the most widely used general purpose energy systems model~\cite{Pfenninger2014}.

However, electricity market liberalisation in many western democracies has changed the framework conditions. Centralised, monopolistic, decision making entities have given way to multiple heterogeneous agents acting in their own best interest~\cite{Most2010}. Therefore, certain policy options which encourage changes must be used by a central planner to attain a desired outcome, for example carbon taxes or subsidies. It is proposed that these complex agents are modelled using agent-based simulation, which allows for the modelling of heterogeneous actors.


A number of simulation tools have emerged which model these electricity markets, for example SEPIA~\cite{Harp2000} EMCAS~\cite{Conzelmann}, NEMSIM~\cite{Batten2006}, AMES~\cite{Sun2007}, PowerACE~\cite{Rothengatter2007}, MACSEM ~\cite{Praca2003}, GAPEX~\cite{Cincotti2013} and  EMLab~\cite{Chappin2017}. By referring to Table \ref{table:tool_comparison}, it can be seen that none of these suit the needs of an open source, long-term market model. We demonstrate that in addition to requiring a long-term electricity market model to be open source, the inclusion of stochastic input variables in ElecSIM allows for better performance. 

Table \ref{table:tool_comparison} is made up of six columns. Tool name, whether the tool is open source, whether they model long-term investment in power plants and what markets they model. We determine how stochasticity is modelled in each tool. Finally, we determine whether the model is generalisable to different countries {\color{red} or whether it is specific to a particular country's regulatory structure.}

The requirement for an open source toolkit is an important feature for reproducibility, transparency and lowering barriers to entry for electricity market models. It enables users to expand the model to their requirements, and rapidly prototype results. The modelling of long-term investment enables scenarios to emerge, and enable users to model investment behaviour. The classification of the type of market that is modelled enables a user to better understand the underlying dynamics of the model. We demonstrate that stochasticity improves results, and better models the physical world, whilst country generalisability is useful for different users to create realisations of their country of interest.

SEPIA \cite{Harp2000} is a discrete event agent based model which utilises Q-learning to model the bids made by GenCos. SEPIA models plants as being always on, and does not have an independent system operator (ISO), which in an electricity market, is an independent non-profit organization for coordinating and controlling of regular operations of the electric power system and market  \cite{Zhou2007}. SEPIA does not model a spot market, instead focusing on bilateral contracts. As opposed to this, ElecSIM has been designed with a merit-order, spot market in mind where renewable energy runs intermittently. As shown in Table \ref{table:tool_comparison}, SEPIA does not include a long-term investment mechanism. 

MACSEM \cite{Praca2003} has been used to probe the effects of market rules and conditions by simulating and testing different bidding strategies. However, MACSEM does not model long term investment decisions or stochastic inputs.

{\color{red}As can be seen in Table \ref{table:tool_comparison},} EMCAS ~\cite{Conzelmann} is a closed source agent-based framework. EMCAS investigates the interactions between physical infrastructures and economic behaviour of market participants. ElecSIM, however, focuses on purely the dynamics of the market, with an aim of providing a simplified, transparent, open source model of market operation, whilst maintaining robustness of results.

PowerACE ~\cite{Rothengatter2007} is also a closed source agent-based simulation of electricity markets that integrates short-term perspectives of daily electricity trading and long-term investment decisions. PowerACE models the spot market, forward market and a carbon market. A carbon market is a market where total carbon emissions within a region are capped. Companies receive emission allowances and are allowed to sell or buy additional allowances based on requirements. Similarly to ElecSIM, PowerACE initialises agents with all power plants in their respective country. However, as can be seen in Table \ref{table:tool_comparison} unlike ElecSIM, PowerACE does not take into account stochasticity of price risks in electricity markets which is of crucial importance to real markets~\cite{Most2010}.

EMLab ~\cite{Chappin2017} is also an agent-based modelling toolkit for the electricity market. EMLab models an endogenous European emissions trading scheme with a yearly time-step. Like PowerACE, EMLab models a carbon market, but they both differ from ElecSIM by not taking into account stochasticity in the electricity markets, such as outages, differing fuel prices within a year period and stochasticity in power plant operating costs. However, after correspondence with the authors, we were unable to run the current version of EMLab.

AMES ~\cite{Sun2007} is an agent-based model specific to the US Wholesale Power Market Platform. GAPEX \cite{Cincotti2013} is an agent-based framework for modelling and simulating power exchanges in MATLAB . GAPEX utilises an enhanced version of the reinforcement technique Roth-Erev to consider the presence of affine total cost functions. However, neither of these model the long-term dynamics that ElecSIM is designed for.

As can be seen from Table \ref{table:tool_comparison} none of the tools fill each of the characteristics we have defined. We therefore propose ElecSIM to fill the gaps that are not currently covered, which includes an open source, long-term stochastic investment model. 


%\begin{itemize}
%	\item Agent Based Models - eg. EMCAS, PowerACE, EMLab: Leaves a requirement for an open source toolkit written in python. Many one-off models available, however difficult to apply to different scenarios.
%	(SEPIA [6], EMCAS [7], NEMSIM [8], AMES [9], PowerACE [10], MASCEM [11, 12], and GAPEX [13] \cite{Lopes})
%	\item Bottom-up optimization models to find minimum cost of electricity system. \cite{Pfenninger2014}. eg. MARKAL/TIMES, MESSAGE. (These do not provide information on how to achieve a certain goal, particularly in a liberalized energy market. Or scenarios as to why a goal may not be achieved as the goal is assumed to be achieved.)
%	\item Computational general equilibrium (CGE) models - Top-down macroeconomic models partial equilibrium model (energy supply, demand, cross-border trade, emissions)- Can be highly complex and difficult to understand. eg. NEMS, PRIMES.
%\end{itemize}



